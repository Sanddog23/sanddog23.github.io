<!--Per aspera ad astra-->

<html lang="en">
  <head>
      <meta charset="utf-8">
      <meta http-equiv="X-UA-Compatible" content="IE=edge">
      <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
      <title>SPAN 3900 Final Project - Alexander Sandoval</title>
      <link href="https://fonts.googleapis.com/css?family=Nunito+Sans" rel="stylesheet">
      <link href="https://fonts.googleapis.com/css?family=Inconsolata|Rubik:300,400,700,900" rel="stylesheet">
      <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css">
      <script src="https://code.jquery.com/jquery-1.11.1.min.js" integrity="sha256-VAvG3sHdS5LqTT+5A/aeq/bZGa/Uj04xKxY8KM/w9EE=" crossorigin="anonymous"></script>
      <script src="https://stackpath.bootstrapcdn.com/bootstrap/3.3.5/js/bootstrap.min.js"></script>
      <link rel="stylesheet" href="css/style_mk2.css">
      <link rel="stylesheet" href="css/style_mk1.css">
      <link rel="stylesheet" href="css/style_span_class.css">
      
      <script>
            var quiztitle = "Fact or Fiction Quiz";
            
            function shuffle(array) {
              var currentIndex = array.length, temporaryValue, randomIndex;
              // While there remain elements to shuffle...
              while (0 !== currentIndex) {
                // Pick a remaining element...
                randomIndex = Math.floor(Math.random() * currentIndex);
                currentIndex -= 1;
                // And swap it with the current element.
                temporaryValue = array[currentIndex];
                array[currentIndex] = array[randomIndex];
                array[randomIndex] = temporaryValue;
              }
              return array;
            }
	    
            if (!("scramble" in Array.prototype)) {
              Object.defineProperty(Array.prototype, "scramble", {
                enumerable: false,
                value: function() {
                  var o, i, ln = this.length;
                  while (ln--) {
                    i = Math.random() * (ln + 1) | 0;
                    o = this[ln];
                    this[ln] = this[i];
                    this[i] = o;
                  }
                  return this;
                }
              });
            }		

                var quiz = [
                    {
                        "question"      :   "• A small number of organisms can survive in space without any kind of protective enclosure.",
                        "image"         :   "",
                        "choices"       :   [
                                                "Fact",
                                                "Fiction"
                                            ],
                        "correct"       :   "Fact",
                        "explanation"   :   "https://m.esa.int/Our_Activities/Human_Spaceflight/Research/Exobiology",
                    },
                    {
                        "question"      :   "• We currently have the technology necessary to send astronauts to another star system within a reasonable timespan. The only problem is that such a mission would be overwhelmingly expensive.",
                        "image"         :   "",
                        "choices"       :   [
                                                "Fact",
                                                "Fiction"
                                            ],
                        "correct"       :   "Fiction",
                        "explanation"   :   "https://www.space.com/41447-parker-solar-probe-fastest-spacecraft-ever.html",
                    },
                    {
                        "question"      :   "• There is no gravity on the International Space Station.",
                        "image"         :   "",
                        "choices"       :   [
                                                "Fact",
                                                "Fiction"
                                            ],
                        "correct"       :   "Fiction",
                        "explanation"   :   "https://www.nasa.gov/audience/forstudents/5-8/features/nasa-knows/what-is-microgravity-58.html",
                    },
                    {
                        "question"      :   "• The premise of teleportation is theoretically sound.",
                        "image"         :   "",
                        "choices"       :   [
                                                "Fact",
                                                "Fiction"
                                            ],
                        "correct"       :   "Fact",
                        "explanation"   :   "https://arxiv.org/abs/1707.00934",
                    },
                    {
                        "question"      :   "• A light year is a measurement of time.",
                        "image"         :   "",
                        "choices"       :   [
                                                "Fact",
                                                "Fiction"
                                            ],
                        "correct"       :   "Fiction",
                        "explanation"   :   "https://earthsky.org/space/what-is-a-light-year",
                    },
                    {
                        "question"      :   "• The universe is about 14 billion years old.",
                        "image"         :   "",
                        "choices"       :   [
                                                "Fact",
                                                "Fiction"
                                            ],
                        "correct"       :   "Fact",
                        "explanation"   :   "https://wmap.gsfc.nasa.gov/universe/uni_age.html",
                    },
                    {
                        "question"      :   "• The most consecutive days in space held by a person is 342.",
                        "image"         :   "",
                        "choices"       :   [
                                                "Fact",
                                                "Fiction"
                                            ],
                        "correct"       :   "Fiction",
                        "explanation"   :   "https://www.space.com/11337-human-spaceflight-records-50th-anniversary.html",
                    },
                    {
                        "question"      :   "• There have been at most 4 women in space at once.",
                        "image"         :   "",
                        "choices"       :   [
                                                "Fact",
                                                "Fiction"
                                            ],
                        "correct"       :   "Fact",
                        "explanation"   :   "https://www.space.com/11337-human-spaceflight-records-50th-anniversary.html",
                    },
                    {
                        "question"      :   "• The largest know star in the universe is 500 times bigger than the Sun.",
                        "image"         :   "",
                        "choices"       :   [
                                                "Fact",
                                                "Fiction"
                                            ],
                        "correct"       :   "Fiction",
                        "explanation"   :   "https://www.space.com/41290-biggest-star.html",
                    },
                    {
                        "question"      :   "• NASA's budget accounts for nearly one-fourth of government spending.",
                        "image"         :   "",
                        "choices"       :   [
                                                "Fact",
                                                "Fiction"
                                            ],
                        "correct"       :   "Fiction",
                        "explanation"   :   "https://www.lpi.usra.edu/exploration/multimedia/NASABudgetHistory.pdf",
                    },
                ];
            //use this for IE syntax error at => : ECMA script 6 not supported in IE 11 :(
            //quiz.forEach(function(q){ return q.choices.scramble()});
            //use this for ECMA script 6
            quiz.forEach(q => q.choices.scramble());
            //console.log(quiz[0].choices);

            quiz = shuffle(quiz);

                /******* No need to edit below this line *********/
                var currentquestion = 0, score = 0, submt=true, picked;
                jQuery(document).ready(function($){
                    /**
                     * HTML Encoding function for alt tags and attributes to prevent messy
                     * data appearing inside tag attributes.
                     */
                    function htmlEncode(value){
                      return $(document.createElement('div')).text(value).html();
                    }
                    /**
                     * This will add the individual choices for each question to the ul#choice-block
                     *
                     * @param {choices} array The choices from each question
                     */
                    function addChoices(choices){
                        if(typeof choices !== "undefined" && $.type(choices) == "array"){
                            $('#choice-block').empty();
                            for(var i=0;i<choices.length; i++){
                            $(document.createElement('li')).addClass('choice choice-box btn').attr('data-index', i).text(choices[i]).appendTo('#choice-block');
                            }
                        }
                    }

                    /**
                     * Resets all of the fields to prepare for next question
                     */
                    function nextQuestion(){
                        submt = true;
                        $('#explanation').empty();
                        $('#question').text(quiz[currentquestion]['question']);
                        $('#pager').text('Question ' + Number(currentquestion + 1) + ' of ' + quiz.length);
                        if(quiz[currentquestion].hasOwnProperty('image') && quiz[currentquestion]['image'] != ""){
                            if($('#question-image').length == 0){
                                $(document.createElement('img')).addClass('question-image').attr('id', 'question-image').attr('src', quiz[currentquestion]['image']).attr('alt', htmlEncode(quiz[currentquestion]['question'])).insertAfter('#question');
                            } else {
                                $('#question-image').attr('src', quiz[currentquestion]['image']).attr('alt', htmlEncode(quiz[currentquestion]['question']));
                            }
                        } else {
                            $('#question-image').remove();
                        }
                        addChoices(quiz[currentquestion]['choices']);
                        setupButtons();

                        jQuery(document).ready(function($){
                            $("#question").html(function(){
                                var text= $(this).text().trim().split(" ");
                                var first = text.shift();
                                return (text.length > 0 ? "<span class='number'>"+ first +"</span> " : first) + text.join(" ");
                            });

                            $('p.pager').each(function(){
                                var text = $(this).text().split(' ');
                                if(text.length < 2)
                                    return;

                                text[1] = '<span class="qnumber">'+text[1]+'</span>';
                                $(this).html(
                                    text.join(' ')
                                );
                            });

                        });

                    }
                    /**
                     * After a selection is submitted, checks if its the right answer
                     *
                     * @param {choice} number The li zero-based index of the choice picked
                     */
                    function processQuestion(choice){
                        if(quiz[currentquestion]['choices'][choice] == quiz[currentquestion]['correct']){
                            $('.choice').eq(choice).addClass('btn-success').css({'font-weight':'bold', 'border-color':'#51a351', 'color':'#fff'});
                            $('#explanation').html('<span class="correct">CORRECT!</span> ' + htmlEncode(quiz[currentquestion]['explanation']));
                            score++;
                        } else {
                            $('.choice').eq(choice).addClass('btn-danger').css({'font-weight':'bold', 'border-color':'#f93939', 'color':'#fff'});
                            $('#explanation').html('<span class="incorrect">INCORRECT!</span> ' + htmlEncode(quiz[currentquestion]['explanation']));
                        }
                        currentquestion++;
                        if(currentquestion == quiz.length){
                            $('#submitbutton').html('GET QUIZ RESULTS').removeClass('btn-success').addClass('btn-info').css({'border-color':'#3a87ad', 'color':'#fff'}).on('click', function(){
                                $(this).text('GET QUIZ RESULTS').on('click');
                                endQuiz();
                            })

                        } else if (currentquestion < quiz.length){
                            $('#submitbutton').html('NEXT QUESTION &raquo;').removeClass('btn-success').addClass('btn-warning').css({'font-weight':'bold', 'border-color':'#faa732', 'color':'#fff'}).on('click', function(){
                                $(this).text('- CHECK ANSWER -').removeClass('btn-warning').addClass('btn-success').css({'font-weight':'bold', 'border-color':'#51a351', 'color':'#fff'}).on('click');
                                nextQuestion();
                            })
                        } else {
                            //	$('#submitbutton').html('NEXT QUESTION &raquo;').on('click', function(){
                            //		$(this).text('- CHECK ANSWER -').css({'color':'inherit'}).on('click');
                            //	})
                        }

                    }
                    /**
                     * Sets up the event listeners for each button.
                     */
                    function setupButtons(){
                        $('.choice').on('click', function(){
                            picked = $(this).attr('data-index');
                            $('.choice').removeAttr('style').off('mouseout mouseover');
                            $(this).css({'font-weight':'bold', 'border-color':'#51a351', 'color':'#51a351'});
                            if(submt){
                                submt=false;
                                $('#submitbutton').css({'color':'#fff','cursor':'pointer'}).on('click', function(){
                                    $('.choice').off('click');
                                    $(this).off('click');
                                    processQuestion(picked);
                                });
                            }
                        })
                    }

                    /**
                     * Quiz ends, display a message.
                     */
                    function endQuiz(){
                        $('#explanation').empty();
                        $('#question').empty();
                        $('#choice-block').empty();
                        $('#submitbutton').remove();
                        $('.rsform-block-submit').addClass('show');
                        $('#question').text("You got " + score + " out of " + quiz.length + " correct.");
                        $(document.createElement('h4')).addClass('score').text(Math.round(score/quiz.length * 100) + '%').insertAfter('#question');			
                    }
                    /**
                     * Runs the first time and creates all of the elements for the quiz
                     */
                    function init(){
                        //add title
                        if(typeof quiztitle !== "undefined" && $.type(quiztitle) === "string"){
                            $(document.createElement('h2')).text(quiztitle).appendTo('#frame');
                        } else {
                            $(document.createElement('h2')).text("Quiz").appendTo('#frame');
                        }

                        //add pager and questions
                        if(typeof quiz !== "undefined" && $.type(quiz) === "array"){
                            //add pager
                            $(document.createElement('p')).addClass('pager').attr('id','pager').text('Question 1 of ' + quiz.length).appendTo('#frame');
                            //add first question
                            $(document.createElement('h3')).addClass('question').attr('id', 'question').text(quiz[0]['question']).appendTo('#frame');
                            //add image if present
                            if(quiz[0].hasOwnProperty('image') && quiz[0]['image'] != ""){
                                $(document.createElement('img')).addClass('question-image').attr('id', 'question-image').attr('src', quiz[0]['image']).attr('alt', htmlEncode(quiz[0]['question'])).appendTo('#frame');
                            }

                            $(document.createElement('p')).addClass('explanation').attr('id','explanation').html('').appendTo('#frame');

                            //questions holder
                            $(document.createElement('ul')).attr('id', 'choice-block').appendTo('#frame');

                            //add choices
                            addChoices(quiz[0]['choices']);

                            //add submit button
                            $(document.createElement('div')).addClass('btn-success choice-box').attr('id', 'submitbutton').text('- CHECK ANSWER -').css({'font-weight':'bold', 'color':'#fff','padding':'30px 0', 'border-radius':'10px'}).appendTo('#frame');

                            setupButtons();
                        }
                    }

                    init();

                });

                jQuery(document).ready(function($){			
                    $("#question").html(function(){
                    var text= $(this).text().trim().split(" ");
                    var first = text.shift();
                        return (text.length > 0 ? "<span class='number'>"+ first +"</span> " : first) + text.join(" ");
                    });

                    $('p.pager').each(function(){
                        var text = $(this).text().split(' ');
                        if(text.length < 2)
                            return;

                        text[1] = '<span class="qnumber">'+text[1]+'</span>';
                        $(this).html(
                            text.join(' ')
                        );
                    });
                });	
                    function copyText() {
                        var output = document.getElementById("frame").innerHTML;
                        document.getElementById("placecontent").value = output;
                    }
	    
    </script>
      
  </head>
  <body>
      <section class="website-intro" style="background-image: url(img/moon_spacex.jpg)" opacity="0.5" data-stellar-background-ratio="0.5">
        <div class="container">
            <div class="row">
                <div class="col-md-7 website-intro-text">
                    <h1 class="website-animate" data-animate-effect="fadeIn" style="color: white">
                        <span>Space Fiction</span>Misconceptions
                    </h1>
                    <div class="website-subtitle website-animate" data-animate-effect=fadeIn>
                        <h2 style="color: white">Snap Back to Reality</h2>
                        <h3 style="color: white">By: Alexander Sandoval</h3>
                    </div>
                </div>
            </div>
        </div>
      </section>
      
      <main>
          <div class="main-text">
              <div class="row">
                  <div class="col-xs-12">
                      <div class="website-subtitle website-animate" data-animate-effect=fadeIn>     
                          <h2>Introduction</h2>
                      </div>              
                  </div>
              </div>
              
              <div class="row">
                  <div class="col-xs-12">
                      <div class="website-subtitle website-animate" data-animate-effect=fadeIn>
                          <h2>Film Critiques</h2>
                      </div>              
                  </div>
              </div>
              
              <div class="row">
                  <div class="col-xs-12">
                      <div class="website-subtitle website-animate" data-animate-effect=fadeIn>
                          <h2>Common Misconceptions</h2>
                      </div>              
                  </div>
              </div>
              
              <div class="row">
                  <div class="col-xs-12">
                      <div class="website-subtitle website-animate" data-animate-effect=fadeIn>
                          <h2>Why the Misconception?</h2>
                      </div>
                      
                      <div class="website-subtitle website-animate" data-animate-effect=fadeIn style="text-indent: 5%">
                          <h4>Pros</h4>
                      </div>
                      
                      <div class="website-subtitle website-animate" data-animate-effect=fadeIn style="text-indent: 5%">
                          <h4>Cons</h4>
                      </div>  
                  </div>
              </div>
              
              <div class="row">
                  <div class="col-xs-12">
                      <div class="website-subtitle website-animate" data-animate-effect=fadeIn>
                          <h2>Fact or Fiction? - Test Your Misconception</h2>
                      </div>
                      
                      <div class="form-group rsform-block rsform-block-framecontent">
                          <div id="frame" role="content"></div>
                      </div>
                      
                      <hr>
                      
                      <div class="form-group rsform-block rsform-block-placecontent">
                          <label class="col-sm-3 control-label formControlLabel" data-toggle="tooltip" title="" for="placecontent"></label>
                      </div>
                  </div>
              </div>
              
               <div class="row">
                  <div class="col-xs-12">
                      <div class="website-subtitle website-animate" data-animate-effect=fadeIn>
                          <h2>References</h2>
                      </div>              
                  </div>
              </div>
              
              <div class="row">
                  <div class="col-xs-12">
                      <div class="doc-footer">
                          <p>Copyright &copy; 2018, Alex Sandoval</p>
                      </div>
                  </div>
              </div>
          </div>
      </main>
      
      <script src="java/scripts.js"></script>
      <script src="java/main.js"></script>
      <script src="java/custom.js"></script>
    </body>
</html>
